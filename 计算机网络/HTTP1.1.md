## keep-alive

keep-alive会消除第二次TCP三次握手，避免另一轮 TCP 慢启动，并节省完整的往返网络延迟。对于现在的广泛普及的宽带连接来说，Keep-Alive也许并不像以前一样有用。web服务器会保持连接若干秒（Apache中默认15秒），这与提高的性能相比也许会影响性能。对于单个文件被不断请求的服务（例如图片存放网站），Keep-Alive可能会极大的影响性能，因为它在文件被请求之后还保持了不必要的连接很长时间。

## 请求管道化

在HTTP/1.1中，将多个[HTTP](https://zh.wikipedia.org/wiki/HTTP)请求（request）整批提交的技术，而在发送过程中不需先等待服务器的回应。但是在响应请求时，必须按照发送请求的顺序。在这个过程中可能会造成队头阻塞，造成延迟。

# 浏览器做出的优化

## 使用多个 TCP 连接

在 HTTP/1.x 中没有多路复用的情况下，浏览器可以天真地将客户端上的所有 HTTP 请求排队，通过单个持久连接一个接一个地发送。然而，在实践中，这太慢了。因此，浏览器供应商别无选择，只能并行打开多个 TCP 会话。大多数现代浏览器，包括桌面浏览器和移动浏览器，每个主机最多打开六个连接。同一个域名同时最多只能建立6个TCP连接。

坏处：

- 消耗客户端、服务器和所有中介资源的额外套接字：额外的内存缓冲区和 CPU 开销
- 并行 TCP 流之间共享带宽的竞争
- 处理套接字集合的实现复杂度更高
- 即使考虑到并行 TCP 流，应用程序并行性也有限
- 限制每台主机的最大连接数允许浏览器针对无意（或有意）拒绝服务 (DoS) 攻击提供安全检查。如果没有这样的限制，客户端可以使服务器上的所有可用资源饱和。

## 域名分片（已被弃用）

当6个TCP连接任然不够使用时，可以通过将一个域拆分成好几个域。所有这些域名都指向同一台服务器。

坏处：每个新的主机名都需要额外的 DNS 查找，每个额外的套接字都会消耗双方额外的资源，最糟糕的是，需要网站作者手动管理资源的分配位置和方式。